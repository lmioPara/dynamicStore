!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dynamicStore=e():t.dynamicStore=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i={treeDelimiter:"$",setDeep:!0,debugger:!1,arrayConversion:!1,userExternalObject:!1,mutationController:["set"],controllerDecorator:"@",snapShot:3e3};const o={set:{keys:["action","value"],fn:(t,e,n,i)=>{if(t[e]=n,e.indexOf(i.treeDelimiter)>0){e.split(i.treeDelimiter).reduce((t,e,i,o)=>(i===o.length-1&&(t[e]=n),t[e]),t)}}},snap:{keys:["action","value","delay"],fn:(t,e,n,i)=>{let o=t[e];t[e]=n,setTimeout(()=>{t[e]=o},i.snapShot)}},batchSet:{}};var r=(t,e="set")=>function(n,i){this.config.debugger&&console.log(`[DS mutation] ${t} ${e}`,n,this.config),o[e].fn(n,t,i,this.config)};var s=t=>async function(e){this.config.debugger&&console.log("[DS action] "+t,e,this.config),await this.config.actions[t](e,this.config)};e.default=class{constructor(t,e){this.state=t,this.config={...i,...e},this.state=this.conversion(this.state)}conversion(t,e=""){let n=Object.keys(t),i={};return n.map(n=>{if(n.indexOf(this.config.treeDelimiter)>=0)throw new Error(`state中不能使用 [${this.config.treeDelimiter}] 连接符  问题key: [${n}] 前缀: [${e}]`);let o=JSON.parse(JSON.stringify(t[n])),r=`${e}${n}`;if("[object Object]"===Object.prototype.toString.call(o)){i[r]=o;let t=this.conversion(o,`${r}${this.config.treeDelimiter}`);Object.assign(i,t)}else if("[object Array]"===Object.prototype.toString.call(o)&&this.config.arrayConversion){i[r]=o;let t=this.conversion(o,`${r}${this.config.treeDelimiter}`);Object.assign(i,t)}else i[r]=o}),i}getMutations(){let t=this.state,e={};return Object.keys(t).map(t=>{e[t]=r(t).bind(this),this.config.mutationController.map(n=>{"set"!==n&&(e[`${t}${this.config.controllerDecorator}${n}`]=r(t,n).bind(this))})}),e}getGetters(){let t=this.state,e={},n=Object.keys(t),i=this.config;return n.map(t=>{e[t]=function(e,n,o){return i.debugger&&console.log("[DS getters] "+t),e[t]}}),e}getState(){return this.state}getActions(){if(this.config.actions){let t=this.config.actions,e={};return Object.keys(t).map(t=>{e[t]=s(t).bind(this)}),e}return{}}exportModule(){return{namespaced:!0,state:this.getState(),actions:this.getActions(),getters:this.getGetters(),mutations:this.getMutations()}}}}])}));